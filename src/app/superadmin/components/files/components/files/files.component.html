<div class="page-wrapper">

    <!-- Header -->
    <app-header></app-header>

    <div class="container">
        <div class="content-wrapper">
            <superadmin-sidebar></superadmin-sidebar>

            <content>
                <div class="page-top">
                    <div class="page-head">
                        <h2>Файлы</h2>

                        <div class="new-review">
                            <div class="new-review-button" (click)="uploadFile.click()">
                                <img src="../../../../assets/images/icon-plus.svg" />
                            </div>
                        </div>

                        <input type="file" (change)="uploadFileHandler($event.target.files)" #uploadFile hidden />
                    </div>
                    
                    <div class="page-filters">
                        <div class="filter page-size">
                            <div class="filter-title">
                                На странице
                            </div>

                            <div class="filter-values" *ngIf="activeTab == 'Videos'">
                                <div class="filter-value" (click)="setPageSize(activeTab, 12)" [ngClass]="{'active': videos.pageSize == 12}">12</div>
                                <div class="filter-value" (click)="setPageSize(activeTab, 24)" [ngClass]="{'active': videos.pageSize == 24}">24</div>
                                <div class="filter-value" (click)="setPageSize(activeTab, 48)" [ngClass]="{'active': videos.pageSize == 48}">48</div>
                                <div class="filter-value" (click)="setPageSize(activeTab, 100)" [ngClass]="{'active': videos.pageSize == 100}">100</div>
                            </div>

                            <div class="filter-values" *ngIf="activeTab == 'Images'">
                                <div class="filter-value" (click)="setPageSize(activeTab, 12)" [ngClass]="{'active': images.pageSize == 12}">12</div>
                                <div class="filter-value" (click)="setPageSize(activeTab, 24)" [ngClass]="{'active': images.pageSize == 24}">24</div>
                                <div class="filter-value" (click)="setPageSize(activeTab, 48)" [ngClass]="{'active': images.pageSize == 48}">48</div>
                                <div class="filter-value" (click)="setPageSize(activeTab, 100)" [ngClass]="{'active': images.pageSize == 100}">100</div>
                            </div>
                        </div>

                        <div class="filter search" *ngIf="activeTab == 'Videos'">
                            <input type="text" placeholder="Поиск..." [(ngModel)]="videos.searchQuery" (ngModelChange)="setSearchQuery('Videos')" required />
                            
                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="14px" height="14px" viewBox="0 0 28.931 28.932"> 
                                <g>
                                    <path d="M28.344,25.518l-6.114-6.115c1.486-2.067,2.303-4.537,2.303-7.137c0-3.275-1.275-6.355-3.594-8.672
                                        C18.625,1.278,15.543,0,12.266,0C8.99,0,5.909,1.275,3.593,3.594C1.277,5.909,0.001,8.99,0.001,12.266
                                        c0,3.276,1.275,6.356,3.592,8.674c2.316,2.316,5.396,3.594,8.673,3.594c2.599,0,5.067-0.813,7.136-2.303l6.114,6.115
                                        c0.392,0.391,0.902,0.586,1.414,0.586c0.513,0,1.024-0.195,1.414-0.586C29.125,27.564,29.125,26.299,28.344,25.518z M6.422,18.111
                                        c-1.562-1.562-2.421-3.639-2.421-5.846S4.86,7.983,6.422,6.421c1.561-1.562,3.636-2.422,5.844-2.422s4.284,0.86,5.845,2.422
                                        c1.562,1.562,2.422,3.638,2.422,5.845s-0.859,4.283-2.422,5.846c-1.562,1.562-3.636,2.42-5.845,2.42S7.981,19.672,6.422,18.111z"/>
                                </g>
                            </svg>
                        </div>

                        <div class="filter search" *ngIf="activeTab == 'Images'">
                            <input type="text" placeholder="Поиск..." [(ngModel)]="images.searchQuery" (ngModelChange)="setSearchQuery('Images')" required />
                            
                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="14px" height="14px" viewBox="0 0 28.931 28.932"> 
                                <g>
                                    <path d="M28.344,25.518l-6.114-6.115c1.486-2.067,2.303-4.537,2.303-7.137c0-3.275-1.275-6.355-3.594-8.672
                                        C18.625,1.278,15.543,0,12.266,0C8.99,0,5.909,1.275,3.593,3.594C1.277,5.909,0.001,8.99,0.001,12.266
                                        c0,3.276,1.275,6.356,3.592,8.674c2.316,2.316,5.396,3.594,8.673,3.594c2.599,0,5.067-0.813,7.136-2.303l6.114,6.115
                                        c0.392,0.391,0.902,0.586,1.414,0.586c0.513,0,1.024-0.195,1.414-0.586C29.125,27.564,29.125,26.299,28.344,25.518z M6.422,18.111
                                        c-1.562-1.562-2.421-3.639-2.421-5.846S4.86,7.983,6.422,6.421c1.561-1.562,3.636-2.422,5.844-2.422s4.284,0.86,5.845,2.422
                                        c1.562,1.562,2.422,3.638,2.422,5.845s-0.859,4.283-2.422,5.846c-1.562,1.562-3.636,2.42-5.845,2.42S7.981,19.672,6.422,18.111z"/>
                                </g>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="page-content">
                    <div class="tabs">
                        <ul class="tabs-head" #filesTabs>
                            <li class="tab-head videos" name="Videos" [ngClass]="{'active': activeTab == 'Videos'}" (click)="setActiveTab('Videos')">
                                <div class="title">
                                    Видео
                                </div>

                                <div class="count">
                                    {{ videos.totalItems }}
                                </div>
                            </li>

                            <li class="tab-head images" name="Images" [ngClass]="{'active': activeTab == 'Images'}" (click)="setActiveTab('Images')">
                                <div class="title">
                                    Изображения
                                </div>

                                <div class="count">
                                    {{ images.totalItems }}
                                </div>
                            </li>
                        </ul>

                        <div class="tabs-content">
                            <div class="tab-content" *ngIf="activeTab == 'Videos'">
                                <div class="list">
                                    <div class="clients-list-item" *ngFor="let video of videos.files">
                                        <div class="delete-button" (click)="deleteFile(video)">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z" fill="#D75A4A"/>
                                                <path d="M5.12012 10.8801L8.00012 8.00012L10.8801 5.12012" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round"/>
                                                <path d="M5.12012 5.12012L8.00012 8.00012L10.8801 10.8801" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round"/>
                                            </svg>                                            
                                        </div>
    
                                        <div class="client-name">
                                            <div class="video-wrapper">
                                                <video [src]="video.url" 
                                                    style="width: 100%; height: 100%; border-radius: 10px; background: #000000;" 
                                                    controls="controls" preload="metadata">
                                                </video>
                                            </div>
                                        </div>
            
                                        <div class="client-stats">
                                            <div class="stat-block">
                                                <div class="title">
                                                    Название
                                                </div>
            
                                                <div class="value">
                                                    {{ video.name }}
                                                </div>
                                            </div>
    
                                            <div class="stat-block">
                                                <div class="title">
                                                    Расширение
                                                </div>
            
                                                <div class="value">
                                                    {{ getFileTypeStr(video) }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="customers-pagination">
                                    <app-pagination #videosPagination [currentPage]="videos.currentPage" [totalPages]="videos.totalPages" (onChanged)="setPageNumber('Videos', $event)"></app-pagination>
                                </div>

                                <div class="no-content" *ngIf="!videos || !videos.files || !videos.files.length">
                                    <div class="icon">
                                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M20.0001 38.0001C28.8366 38.0001 36.0001 30.8366 36.0001 22.0001C36.0001 13.1635 28.8366 6.00008 20.0001 6.00008C11.1635 6.00008 4.00008 13.1635 4.00008 22.0001C4.00008 30.8366 11.1635 38.0001 20.0001 38.0001ZM20.0001 40.0001C29.9412 40.0001 38.0001 31.9412 38.0001 22.0001C38.0001 12.059 29.9412 4.00008 20.0001 4.00008C10.059 4.00008 2.00008 12.059 2.00008 22.0001C2.00008 31.9412 10.059 40.0001 20.0001 40.0001Z" fill="#D4E1DC"/>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M18.0001 24.0001V11.0001H20.0001V22.0569L25.4188 18.1863L26.5813 19.8138L19.5813 24.8138C19.2765 25.0315 18.8756 25.0606 18.5425 24.8892C18.2094 24.7178 18.0001 24.3747 18.0001 24.0001Z" fill="#D4E1DC"/>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M37.293 10.7072L29.293 2.70718L30.7072 1.29297L38.7072 9.29297L37.293 10.7072Z" fill="#D4E1DC"/>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M2.70718 10.7072L10.7072 2.70718L9.29297 1.29297L1.29297 9.29297L2.70718 10.7072Z" fill="#D4E1DC"/>
                                        </svg>                                
                                    </div>
            
                                    Список видео пуст
                                </div>
                            </div>

                            <div class="tab-content" *ngIf="activeTab == 'Images'">
                                <div class="list">
                                    <div class="clients-list-item" *ngFor="let image of images.files">
                                        <div class="delete-button" (click)="deleteFile(image)">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z" fill="#D75A4A"/>
                                                <path d="M5.12012 10.8801L8.00012 8.00012L10.8801 5.12012" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round"/>
                                                <path d="M5.12012 5.12012L8.00012 8.00012L10.8801 10.8801" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round"/>
                                            </svg>                                            
                                        </div>
    
                                        <div class="client-name">
                                            <a [href]="image.url" target="_blank">
                                                <img [src]="image.url" [alt]="image.name" />
                                            </a>
                                        </div>
            
                                        <div class="client-stats">
                                            <div class="stat-block">
                                                <div class="title">
                                                    Название
                                                </div>
            
                                                <div class="value">
                                                    {{ image.name }}
                                                </div>
                                            </div>
    
                                            <div class="stat-block">
                                                <div class="title">
                                                    Расширение
                                                </div>
            
                                                <div class="value">
                                                    {{ getFileTypeStr(image) }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="customers-pagination">
                                    <app-pagination #imagesPagination [currentPage]="images.currentPage" [totalPages]="images.totalPages" (onChanged)="setPageNumber('Images', $event)"></app-pagination>
                                </div>

                                <div class="no-content" *ngIf="!images || !images.files || !images.files.length">
                                    <div class="icon">
                                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M20.0001 38.0001C28.8366 38.0001 36.0001 30.8366 36.0001 22.0001C36.0001 13.1635 28.8366 6.00008 20.0001 6.00008C11.1635 6.00008 4.00008 13.1635 4.00008 22.0001C4.00008 30.8366 11.1635 38.0001 20.0001 38.0001ZM20.0001 40.0001C29.9412 40.0001 38.0001 31.9412 38.0001 22.0001C38.0001 12.059 29.9412 4.00008 20.0001 4.00008C10.059 4.00008 2.00008 12.059 2.00008 22.0001C2.00008 31.9412 10.059 40.0001 20.0001 40.0001Z" fill="#D4E1DC"/>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M18.0001 24.0001V11.0001H20.0001V22.0569L25.4188 18.1863L26.5813 19.8138L19.5813 24.8138C19.2765 25.0315 18.8756 25.0606 18.5425 24.8892C18.2094 24.7178 18.0001 24.3747 18.0001 24.0001Z" fill="#D4E1DC"/>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M37.293 10.7072L29.293 2.70718L30.7072 1.29297L38.7072 9.29297L37.293 10.7072Z" fill="#D4E1DC"/>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M2.70718 10.7072L10.7072 2.70718L9.29297 1.29297L1.29297 9.29297L2.70718 10.7072Z" fill="#D4E1DC"/>
                                        </svg>                                
                                    </div>
            
                                    Список изображений пуст
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </content>
        </div>
    </div>

    <!-- Footer -->
    <app-footer></app-footer>
</div>

<upload-file-dialog #uploadModal></upload-file-dialog>